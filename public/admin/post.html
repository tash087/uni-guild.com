<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ‹ãƒ¥ãƒ¼ã‚¹ä½œæˆãƒ„ãƒ¼ãƒ« (JSç‰ˆ)</title>
    <style>
        body { font-family: sans-serif; max-width: 700px; margin: 50px auto; line-height: 1.6; background: #f4f7f6; padding: 20px; }
        .panel { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { font-size: 1.5rem; margin-bottom: 20px; text-align: center; }
        input, textarea, select { width: 100%; margin-bottom: 15px; padding: 12px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 5px; }
        .btn-group { display: flex; gap: 10px; }
        button { flex: 1; background: #e67e22; color: white; border: none; padding: 12px; cursor: pointer; border-radius: 5px; font-weight: bold; font-size: 1rem; }
        button:hover { background: #d35400; }
        .result-box { margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 5px; display: none; }
        pre { background: #eee; padding: 10px; overflow-x: auto; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="panel">
    <h1>ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ä½œæˆãƒ„ãƒ¼ãƒ«</h1>
    <p style="font-size: 0.8rem; color: #666;">â€»ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ç”Ÿæˆå¾Œã€æ‰‹å‹•ã§ãƒªãƒã‚¸ãƒˆãƒªã«è¿½åŠ ã—ã¦Pushã—ã¦ãã ã•ã„ã€‚</p>

    <label>ã‚¿ã‚¤ãƒˆãƒ«:</label>
    <input type="text" id="title" placeholder="ä¾‹ï¼šã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ã®ãŠçŸ¥ã‚‰ã›">
    
    <div style="display: flex; gap: 15px;">
        <div style="flex: 1;">
            <label>ã‚«ãƒ†ã‚´ãƒª:</label>
            <select id="category">
                <option>ãŠçŸ¥ã‚‰ã›</option>
                <option>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ</option>
                <option>ã‚¤ãƒ™ãƒ³ãƒˆ</option>
                <option>é‡è¦</option>
            </select>
        </div>
        <div style="flex: 1;">
            <label>æŠ•ç¨¿è€…å:</label>
            <input type="text" id="author" value="tash087">
        </div>
    </div>

    <label>æœ¬æ–‡ (HTMLã‚¿ã‚°ä½¿ç”¨å¯):</label>
    <textarea id="content" rows="12" placeholder="è©³ç´°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
    
    <div class="btn-group">
        <button onclick="generateFiles()">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ä¿å­˜</button>
    </div>

    <div id="result" class="result-box">
        <p>âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼</p>
        <p>1. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸHTMLã‚’ <code>public/news/</code> ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚</p>
        <p>2. ä¸‹ã®JSONã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ <code>news.json</code> ã®å…ˆé ­ï¼ˆ[ ã®ç›´å¾Œï¼‰ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
        <pre id="json-code"></pre>
    </div>
</div>

<script>
function generateFiles() {
    const title = document.getElementById('title').value;
    const category = document.getElementById('category').value;
    const author = document.getElementById('author').value;
    const content = document.getElementById('content').value;
    const date = new Date().toLocaleDateString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\//g, '.');
    const id = Math.floor(Date.now() / 1000);
    const fileName = `post_${id}.html`;

    // 1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆHTMLã®ç”Ÿæˆ (template.phpã®æ§‹é€ ã‚’ç§»æ¤)
    const htmlTemplate = `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title} - ç®±åº­ã‚¯ãƒ©ãƒ•ãƒˆ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../images/server_icon.png" type="image/png">
    <script src="../js/include.js" defer><\/script>
    <script src="../js/day-count.js"><\/script>
    <script src="../js/slider.js" defer><\/script>
    <style>
        .section-padding { padding-top: calc(var(--header-height) + 40px) !important; }
        .news-detail-container { max-width: 900px; margin: 0 auto; background: #fff; padding: 40px 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .news-header { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0; }
        .news-meta { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; font-size: 0.95rem; color: #888; }
        .news-category-badge { background: #e67e22; color: white; padding: 4px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 700; }
        .news-title { font-size: 2.2rem; line-height: 1.4; color: #333; margin: 10px 0; }
        .news-author-info { margin-top: 15px; color: #666; font-size: 0.9rem; }
        .news-content { line-height: 1.8; font-size: 1.05rem; color: #444; }
        .news-footer { margin-top: 50px; text-align: center; padding-top: 30px; border-top: 2px dashed #e0ddd9; }
    </style>
</head>
<body>
    <div id="header-placeholder"><\/div>
    <main class="container section-padding">
        <article class="news-detail-container">
            <header class="news-header">
                <div class="news-meta">
                    <span class="news-date">${date}<\/span>
                    <span class="news-category-badge">${category}<\/span>
                </div>
                <h1 class="news-title">${title}<\/h1>
                <div class="news-author-info">Posted by ${author}<\/div>
            </header>
            <section class="news-content">${content}<\/section>
            <footer class="news-footer">
                <a href="../index.html" class="btn-nav btn-outline-nav">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
            </footer>
        </article>
    </main>
    <div id="footer-placeholder"><\/div>
</body>
</html>`;

    // 2. HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    const blob = new Blob([htmlTemplate], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = fileName;
    a.click();

    // 3. news.json ç”¨ã®ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
    const jsonEntry = {
        "date": date,
        "category": category,
        "title": title,
        "url": `news/${fileName}`
    };
    document.getElementById('json-code').innerText = JSON.stringify(jsonEntry, null, 4) + ",";
    document.getElementById('result').style.display = 'block';
}
</script>
</body>
</html>